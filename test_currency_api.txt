[0;34mChecking if server is running...[0m
[0;34mStarting Currency Converter API Tests[0m


[0;34m=== Testing Simple Endpoint ===[0m

[0;34mTesting: Valid conversion (US to France)[0m
POST /currency
Request: {"from": "United States", "to": "France", "amount": 100, "preferred_currency": null}
Response: {"from":"USD","to":"EUR","amount":94.64}

[0;32mâœ“ Test passed[0m

[0;34mTesting: Invalid source country[0m
POST /currency
Request: {"from": "Narnia", "to": "France", "amount": 100, "preferred_currency": null}
Response: {"error":"Country not found: Narnia","code":"COUNTRY_NOT_FOUND","request_id":"3cda7aa7-e4d8-422b-b422-33537550cb72","timestamp":"2024-11-30T12:27:52.771075062Z"}

[0;31mâœ— Test failed (Status: 404)[0m

[0;34mTesting: Valid European conversion[0m
POST /currency
Request: {"from": "Germany", "to": "France", "amount": 50, "preferred_currency": null}
Response: {"from":"EUR","to":"EUR","amount":50.0}

[0;32mâœ“ Test passed[0m

[0;34mTesting: Case insensitive test[0m
POST /currency
Request: {"from": "japan", "to": "australia", "amount": 1000, "preferred_currency": null}
Response: {"from":"JPY","to":"AUD","amount":10.23}

[0;32mâœ“ Test passed[0m

[0;34mTesting: Zero amount validation[0m
POST /currency
Request: {"from": "United States", "to": "France", "amount": 0, "preferred_currency": null}
Response: {"error":"Invalid currency: Amount must be greater than 0","code":"INVALID_CURRENCY","request_id":"a778e694-2f09-4626-944b-727950488f0c","timestamp":"2024-11-30T12:27:52.973732898Z"}

[0;32mâœ“ Test passed (Expected validation error)[0m

[0;34mTesting: Same country conversion[0m
POST /currency
Request: {"from": "France", "to": "France", "amount": 100, "preferred_currency": null}
Response: {"from":"EUR","to":"EUR","amount":100.0}

[0;32mâœ“ Test passed[0m

[0;34m=== Testing V1 Endpoint ===[0m

[0;34mTesting: Valid conversion (US to France)[0m
POST /v1/currency
Request: {"from": "United States", "to": "France", "amount": 100, "preferred_currency": null}
Response: {"request_id":"f454279e-bd03-43e2-bdd8-bf11a3d4885b","timestamp":"2024-11-30T12:27:53.189392946Z","data":{"from":{"country":"United States Minor Outlying Islands","currency_code":"USD","currency_name":"United States dollar","currency_symbol":"$","amount":100.0,"is_primary":true},"to":{"country":"France","currency_code":"EUR","currency_name":"Euro","currency_symbol":"â‚¬","amount":94.64,"is_primary":true},"exchange_rate":0.94642762,"last_updated":"2024-11-30T12:27:53.189400032Z","available_currencies":[{"code":"USD","name":"United States dollar","symbol":"$","is_primary":true},{"code":"EUR","name":"Euro","symbol":"â‚¬","is_primary":true}]},"meta":{"source":"exchangerate-api.com","response_time_ms":145,"multiple_currencies_available":true,"cache_hit":false}}

[0;32mâœ“ Test passed[0m

[0;34mTesting: Valid European conversion[0m
POST /v1/currency
Request: {"from": "Germany", "to": "Spain", "amount": 50, "preferred_currency": null}
Response: {"request_id":"293041c4-4681-4690-94ee-30669353f2ea","timestamp":"2024-11-30T12:27:53.248346744Z","data":{"from":{"country":"Germany","currency_code":"EUR","currency_name":"Euro","currency_symbol":"â‚¬","amount":50.0,"is_primary":true},"to":{"country":"Spain","currency_code":"EUR","currency_name":"Euro","currency_symbol":"â‚¬","amount":50.0,"is_primary":true},"exchange_rate":1.0,"last_updated":"2024-11-30T12:27:53.248350354Z","available_currencies":[{"code":"EUR","name":"Euro","symbol":"â‚¬","is_primary":true}]},"meta":{"source":"exchangerate-api.com","response_time_ms":45,"multiple_currencies_available":true,"cache_hit":true}}

[0;32mâœ“ Test passed[0m

[0;34mTesting: Invalid source country[0m
POST /v1/currency
Request: {"from": "Narnia", "to": "France", "amount": 100, "preferred_currency": null}
Response: {"request_id":"18bc954b-22ce-4ddf-a0a9-f4ecf75d6d2e","timestamp":"2024-11-30T12:27:53.276724253Z","data":{"from":{"country":"Narnia","currency_code":"INVALID","currency_name":"Invalid Currency","currency_symbol":"","amount":100.0,"is_primary":false},"to":{"country":"France","currency_code":"INVALID","currency_name":"Invalid Currency","currency_symbol":"","amount":0.0,"is_primary":false},"exchange_rate":0.0,"last_updated":"2024-11-30T12:27:53.276742374Z"},"meta":{"source":"exchangerate-api.com","response_time_ms":15,"multiple_currencies_available":false,"cache_hit":false}}

[0;32mâœ“ Test passed[0m

[0;34mTesting: Case insensitive test[0m
POST /v1/currency
Request: {"from": "japan", "to": "australia", "amount": 1000, "preferred_currency": null}
Response: {"request_id":"e66738d4-4ee8-46b4-ad84-52c606ca4dc8","timestamp":"2024-11-30T12:27:53.429763064Z","data":{"from":{"country":"Japan","currency_code":"JPY","currency_name":"Japanese yen","currency_symbol":"Â¥","amount":1000.0,"is_primary":true},"to":{"country":"Australia","currency_code":"AUD","currency_name":"Australian dollar","currency_symbol":"$","amount":10.23,"is_primary":true},"exchange_rate":0.01023482,"last_updated":"2024-11-30T12:27:53.429768599Z","available_currencies":[{"code":"JPY","name":"Japanese yen","symbol":"Â¥","is_primary":true},{"code":"AUD","name":"Australian dollar","symbol":"$","is_primary":true}]},"meta":{"source":"exchangerate-api.com","response_time_ms":139,"multiple_currencies_available":true,"cache_hit":false}}

[0;32mâœ“ Test passed[0m

[0;34mTesting: Zero amount validation[0m
POST /v1/currency
Request: {"from": "United States", "to": "France", "amount": 0, "preferred_currency": null}
Response: {"request_id":"f5f5223c-6c76-449d-afa9-f0848c62b241","timestamp":"2024-11-30T12:27:53.443200684Z","data":{"from":{"country":"United States","currency_code":"INVALID","currency_name":"Invalid Currency","currency_symbol":"","amount":0.0,"is_primary":false},"to":{"country":"France","currency_code":"INVALID","currency_name":"Invalid Currency","currency_symbol":"","amount":0.0,"is_primary":false},"exchange_rate":0.0,"last_updated":"2024-11-30T12:27:53.443203689Z"},"meta":{"source":"exchangerate-api.com","response_time_ms":0,"multiple_currencies_available":false,"cache_hit":false}}

[0;32mâœ“ Test passed[0m

[0;34mTesting: Same country conversion[0m
POST /v1/currency
Request: {"from": "France", "to": "France", "amount": 100, "preferred_currency": null}
Response: {"request_id":"adc7e43c-33c7-47fa-ab58-d467f042a521","timestamp":"2024-11-30T12:27:53.482561978Z","data":{"from":{"country":"France","currency_code":"EUR","currency_name":"Euro","currency_symbol":"â‚¬","amount":100.0,"is_primary":true},"to":{"country":"France","currency_code":"EUR","currency_name":"Euro","currency_symbol":"â‚¬","amount":100.0,"is_primary":true},"exchange_rate":1.0,"last_updated":"2024-11-30T12:27:53.482565929Z","available_currencies":[{"code":"EUR","name":"Euro","symbol":"â‚¬","is_primary":true}]},"meta":{"source":"exchangerate-api.com","response_time_ms":26,"multiple_currencies_available":true,"cache_hit":true}}

[0;32mâœ“ Test passed[0m

[0;34m=== Testing Multi-Currency Support ===[0m

[0;34mTesting: Panama multi-currency test (default)[0m
POST /v1/currency
Request: {"from": "Panama", "to": "France", "amount": 100, "preferred_currency": null}
Response: {"request_id":"dfe43ecb-2f2c-4128-a596-a9ea39ec44e1","timestamp":"2024-11-30T12:27:53.634272126Z","data":{"from":{"country":"Panama","currency_code":"USD","currency_name":"United States dollar","currency_symbol":"$","amount":100.0,"is_primary":true},"to":{"country":"France","currency_code":"EUR","currency_name":"Euro","currency_symbol":"â‚¬","amount":94.64,"is_primary":true},"exchange_rate":0.94642762,"last_updated":"2024-11-30T12:27:53.634277790Z","available_currencies":[{"code":"PAB","name":"Panamanian balboa","symbol":"B/.","is_primary":false},{"code":"USD","name":"United States dollar","symbol":"$","is_primary":true},{"code":"EUR","name":"Euro","symbol":"â‚¬","is_primary":true}]},"meta":{"source":"exchangerate-api.com","response_time_ms":137,"multiple_currencies_available":true,"cache_hit":false}}

[0;32mâœ“ Test passed (multi-currency response verified)[0m

[0;34mTesting: Panama with USD preferred[0m
POST /v1/currency
Request: {"from": "Panama", "to": "France", "amount": 100, "preferred_currency": "USD"}
Response: {"error":"Invalid currency: Preferred currency USD not available for France. Available currencies: EUR","code":"INVALID_CURRENCY","request_id":"69555baf-072b-4db3-8acb-8943e18ec326","timestamp":"2024-11-30T12:27:53.685507223Z"}

[0;32mâœ“ Test passed (Expected error response)[0m

[0;34mTesting: Panama with PAB preferred[0m
POST /v1/currency
Request: {"from": "Panama", "to": "France", "amount": 100, "preferred_currency": "PAB"}
Response: {"error":"Invalid currency: Preferred currency PAB not available for France. Available currencies: EUR","code":"INVALID_CURRENCY","request_id":"78d873db-2da2-4d47-b5b4-2de9d4195dbb","timestamp":"2024-11-30T12:27:53.725839094Z"}

[0;32mâœ“ Test passed (Expected error response)[0m

[0;34mTesting: Zimbabwe multi-currency test[0m
POST /v1/currency
Request: {"from": "Zimbabwe", "to": "United States", "amount": 50, "preferred_currency": null}
Response: {"request_id":"6d0287a4-fed5-4e21-b4ec-dd133f4387e8","timestamp":"2024-11-30T12:27:53.875646385Z","data":{"from":{"country":"Zimbabwe","currency_code":"ZWL","currency_name":"Zimbabwean dollar","currency_symbol":"$","amount":50.0,"is_primary":true},"to":{"country":"United States Minor Outlying Islands","currency_code":"USD","currency_name":"United States dollar","currency_symbol":"$","amount":1.96,"is_primary":true},"exchange_rate":0.03929072,"last_updated":"2024-11-30T12:27:53.875651534Z","available_currencies":[{"code":"ZWL","name":"Zimbabwean dollar","symbol":"$","is_primary":true},{"code":"USD","name":"United States dollar","symbol":"$","is_primary":true}]},"meta":{"source":"exchangerate-api.com","response_time_ms":136,"multiple_currencies_available":true,"cache_hit":false}}

[0;32mâœ“ Test passed (multi-currency response verified)[0m

[0;34mTesting: Invalid preferred currency test[0m
POST /v1/currency
Request: {"from": "Panama", "to": "France", "amount": 100, "preferred_currency": "XYZ"}
Response: {"error":"Invalid currency: Preferred currency XYZ not available for Panama. Available currencies: PAB, USD","code":"INVALID_CURRENCY","request_id":"4e439444-211a-4a66-8331-a584c763982c","timestamp":"2024-11-30T12:27:53.920028364Z"}

[0;32mâœ“ Test passed (Expected error response)[0m

[0;34mTesting: Swiss multi-currency test[0m
POST /v1/currency
Request: {"from": "Switzerland", "to": "France", "amount": 100, "preferred_currency": null}
Response: {"request_id":"1b74cae2-2a96-4f6d-831a-f31c85ea4410","timestamp":"2024-11-30T12:27:54.075536536Z","data":{"from":{"country":"Switzerland","currency_code":"CHF","currency_name":"Swiss franc","currency_symbol":"Fr.","amount":100.0,"is_primary":true},"to":{"country":"France","currency_code":"EUR","currency_name":"Euro","currency_symbol":"â‚¬","amount":107.38,"is_primary":true},"exchange_rate":1.07379051,"last_updated":"2024-11-30T12:27:54.075541813Z","available_currencies":[{"code":"CHF","name":"Swiss franc","symbol":"Fr.","is_primary":true},{"code":"EUR","name":"Euro","symbol":"â‚¬","is_primary":true}]},"meta":{"source":"exchangerate-api.com","response_time_ms":141,"multiple_currencies_available":true,"cache_hit":false}}

[0;32mâœ“ Test passed (multi-currency response verified)[0m

[0;34mTesting: Hong Kong multi-currency test[0m
POST /v1/currency
Request: {"from": "Hong Kong", "to": "United States", "amount": 100, "preferred_currency": null}
Response: {"request_id":"4cd7efe8-3758-4dd3-9afb-201e00b9b51e","timestamp":"2024-11-30T12:27:54.232828737Z","data":{"from":{"country":"Hong Kong","currency_code":"HKD","currency_name":"Hong Kong dollar","currency_symbol":"$","amount":100.0,"is_primary":true},"to":{"country":"United States Minor Outlying Islands","currency_code":"USD","currency_name":"United States dollar","currency_symbol":"$","amount":12.85,"is_primary":true},"exchange_rate":0.1284917,"last_updated":"2024-11-30T12:27:54.232834410Z","available_currencies":[{"code":"HKD","name":"Hong Kong dollar","symbol":"$","is_primary":true},{"code":"USD","name":"United States dollar","symbol":"$","is_primary":true}]},"meta":{"source":"exchangerate-api.com","response_time_ms":141,"multiple_currencies_available":true,"cache_hit":false}}

[0;32mâœ“ Test passed (multi-currency response verified)[0m

[0;34m=== Test Summary ===[0m
Total tests: 19
Passed tests: [0;32m18[0m
Failed tests: [0;31m1[0m

[0;31mSome tests failed.[0m
